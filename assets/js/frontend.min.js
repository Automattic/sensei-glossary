var senseiPopupPrototype=function(t,s){var o=s||'a[rel="sensei-glossary"] ';this.getLinkQueryId=function(){return this.queryId},this.popupClickListener=function(s){s.preventDefault(),popupContent=t(s.target).data("glossary-content"),this.glossaryPopup(popupContent,s)},t(o).on("click",t.proxy(this.popupClickListener,this)),this.glossaryPopup=function(s,o){0==t("#sensei-glossary-popup").size()&&(this.theLightbox=t('<div class="entry hentry" id="sensei-glossary-popup"/>'),this.theShadow=t('<div id="sensei-glossary-shadow"/>'),t("body").append(this.theShadow),t("body").append(this.theLightbox)),this.theLightbox.empty();var i=t(o.target).data("glossary-title");this.theLightbox.append("<h2>"+i+"</h2>"),this.theLightbox.append(s),this.theLightbox.css("top",t(window).scrollTop()+100+"px"),this.theLightbox.show(),this.theShadow.show(),this.adjustShadow(),t(this.theShadow).click(t.proxy(this.closeLightbox,this)),t(document).keyup(t.proxy(function(t){27==t.keyCode&&this.closeLightbox()},this)),t(window).scroll(t.proxy(this.adjustShadow,this))},this.closeLightbox=function(){this.theLightbox.hide(),this.theShadow.hide(),this.theLightbox.empty(),t(document).unbind("keyup",this.closeLightbox),t(window).unbind("scroll",this.adjustShadow),t(this.theShadow).unbind("click",this.closeLightbox)},this.adjustShadow=function(){var s=t(window).scrollTop();this.theShadow.css("top",s)}};window.senseiPopup=new senseiPopupPrototype(jQuery);